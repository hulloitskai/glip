version: '{branch}-{build}'
image:
  - Visual Studio 2015
  - Visual Studio 2017

clone_depth: 3
clone_folder: C:\gopath\src\github.com\steven-xie\glip

environment:
  GOPATH: C:\gopath
  matrix:
    - GOVERSION: 1.10
    - GOVERSION: 1.11

platform:
  - x86
  - x64

init:
  - git config --global core.autocrlf input

install:
  ## Install specific Go version.
  - rmdir c:\go /s /q
  - appveyor DownloadFile https://storage.googleapis.com/golang/go%GOVERSION%.windows-amd64.msi
  - msiexec /i go%GOVERSION%.windows-amd64.msi /q

  ## Install code linting tools.
  - go get -u golang.org/x/lint/golint

  ## Configure Cygwin, which can run Makefiles.
  - set PATH=C:\cygwin\bin;%PATH%
  - echo %GOPATH%
  - go version
  - go env

build: off
deploy: off

test_script: make review-race-v
